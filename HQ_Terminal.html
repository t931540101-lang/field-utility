<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>M-SECURITY | HQ ç¸½éƒ¨çµ‚ç«¯</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { background-color: #000; color: #00f2ff; font-family: "Microsoft JhengHei", sans-serif; padding: 20px; }
        .header { border-bottom: 2px solid #00f2ff; padding-bottom: 10px; margin-bottom: 20px; }
        .section { background: #111; padding: 20px; border-radius: 5px; border: 1px solid #333; margin-bottom: 30px; }
        h2 { color: #4da1ff; font-size: 18px; margin-top: 0; border-left: 5px solid #00f2ff; padding-left: 10px; }
        
        /* æˆ°è¡“è¼¸å…¥æ¡† */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 15px; }
        label { font-size: 12px; color: #888; display: block; margin-bottom: 5px; }
        input { background: #1a1a1a; border: 1px solid #444; color: #fff; padding: 10px; width: 100%; box-sizing: border-box; }
        
        .btn { background: #00f2ff; color: #000; border: none; padding: 12px 25px; font-weight: bold; cursor: pointer; border-radius: 3px; }
        .btn-red { background: #ff4d4f; color: #fff; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; color: #4da1ff; border-bottom: 1px solid #333; padding: 10px; }
        td { padding: 12px 10px; border-bottom: 1px solid #222; color: #ccc; }
    </style>
</head>
<body>

    <div class="header">
        <h1>M-SECURITY è³‡æ–™åº«ç®¡ç†å¾Œå°</h1>
        <div style="color: #888; font-size: 12px;">UNIT: HQ-COMMANDER | DB: factor-security-d1965</div>
    </div>

    <div class="section">
        <h2>ğŸ‘¥ å“¡å·¥è³‡æ–™éƒ¨ç½² (é€£å‹•æ‰‹æ©Ÿä¸€èˆ¬æŸ¥è©¢)</h2>
        <div class="grid">
            <div><label>å·¥è™Ÿ</label><input type="text" id="eID" placeholder="å¦‚: K9001"></div>
            <div><label>å§“å</label><input type="text" id="eName" placeholder="å¦‚: å°é»‘å“¥"></div>
            <div><label>å–®ä½</label><input type="text" id="eDept" placeholder="å¦‚: è­¦è¡›çµ„"></div>
            <div><label>è»Šç‰Œ</label><input type="text" id="ePlate" placeholder="å¦‚: ABC-1234"></div>
        </div>
        <button class="btn" onclick="upEmp()">åŒæ­¥è‡³é›²ç«¯</button>
        <table id="eTab">
            <thead><tr><th>å·¥è™Ÿ</th><th>å§“å</th><th>å–®ä½</th><th>è»Šç‰Œ</th><th>æ“ä½œ</th></tr></thead>
            <tbody id="eList"></tbody>
        </table>
    </div>

    <div class="section" style="border-color: #ff4d4f;">
        <h2 style="color: #ff4d4f; border-left-color: #ff4d4f;">ğŸ›‘ ç®¡åˆ¶é»‘åå–®ç™¼å¸ƒ (é€£å‹•æ‰‹æ©Ÿé€²éšé é¢)</h2>
        <div class="grid">
            <div><label>ç®¡åˆ¶å°è±¡</label><input type="text" id="bTarget" placeholder="å§“åæˆ–è»Šç‰Œ"></div>
            <div><label>ç®¡åˆ¶åŸå› </label><input type="text" id="bReason" placeholder="å¦‚: é›¢è·ä¸æ­¸é‚„è­‰ä»¶"></div>
        </div>
        <button class="btn btn-red" onclick="upBlack()">ç™¼å¸ƒç´…è‰²è­¦å ±</button>
        <table id="bTab">
            <thead><tr><th>å°è±¡</th><th>åŸå› </th><th>æ™‚é–“</th><th>æ“ä½œ</th></tr></thead>
            <tbody id="bList"></tbody>
        </table>
    </div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyB2_tKKsVT4kdW7PPkJgI9O7S1YdCWor48",
        databaseURL: "https://factor-security-d1965-default-rtdb.firebaseio.com",
        projectId: "factor-security-d1965",
        appId: "1:864846943143:web:4cfa18cd20d2f712225c82"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // å“¡å·¥ä¸Šå‚³
    function upEmp() {
        const id = document.getElementById('eID').value.trim();
        const name = document.getElementById('eName').value.trim();
        const dept = document.getElementById('eDept').value.trim();
        const plate = document.getElementById('ePlate').value.trim().toUpperCase();
        if(!id || !name) return alert("å·¥è™Ÿå§“åå¿…å¡«");
        const d = { id, name, dept, plate };
        db.ref('employee_list/' + id).set(d);
        if(plate) db.ref('employee_list/' + plate).set(d);
        alert("å“¡å·¥è³‡æ–™å·²æ›´æ–°");
    }

    // é»‘åå–®ä¸Šå‚³
    function upBlack() {
        const name = document.getElementById('bTarget').value.trim();
        const reason = document.getElementById('bReason').value.trim();
        if(!name) return alert("è«‹è¼¸å…¥ç®¡åˆ¶å°è±¡");
        db.ref('blacklist_data').push({ name, reason, time: new Date().toLocaleDateString() });
        alert("é»‘åå–®å·²åŒæ­¥è‡³çµ‚ç«¯");
    }

    // å³æ™‚ç›£çœ‹å“¡å·¥æ¸…å–®
    db.ref('employee_list').on('value', s => {
        const l = s.val(), b = document.getElementById('eList'); b.innerHTML = '';
        for(let k in l) if(k === l[k].id) {
            b.innerHTML += `<tr><td>${l[k].id}</td><td>${l[k].name}</td><td>${l[k].dept}</td><td>${l[k].plate}</td><td><button onclick="db.ref('employee_list/${l[k].id}').remove()" style="color:red;background:none;border:none;cursor:pointer;">åˆªé™¤</button></td></tr>`;
        }
    });

    // å³æ™‚ç›£çœ‹é»‘åå–®
    db.ref('blacklist_data').on('value', s => {
        const l = s.val(), b = document.getElementById('bList'); b.innerHTML = '';
        for(let k in l) {
            b.innerHTML += `<tr><td>${l[k].name}</td><td>${l[k].reason}</td><td>${l[k].time}</td><td><button onclick="db.ref('blacklist_data/${k}').remove()" style="color:red;background:none;border:none;cursor:pointer;">æ’¤éŠ·</button></td></tr>`;
        }
    });
</script>
</body>
</html>
