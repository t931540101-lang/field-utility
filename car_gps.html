<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>小銀衛星測速面板</title>
    <style>
        @font-face {
            font-family: 'Digital';
            src: url('https://db.onlinewebfonts.com/t/8e22783d2d0ad7e0259b57951d382101.woff2') format('woff2');
        }
        body { margin: 0; background: #000; color: #ff6600; font-family: 'Digital', sans-serif; overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        
        /* 模仿發現者外殼 */
        .case { width: 95vw; max-width: 600px; height: 70vh; background: #1a1a1a; border-radius: 20px; border: 4px solid #333; display: flex; flex-direction: column; align-items: center; justify-content: space-around; box-shadow: inset 0 0 50px #000; }
        
        .speed-box { text-align: center; }
        /* 橘紅數位大字 */
        .speed-val { font-size: 150px; text-shadow: 0 0 20px #ff3300; line-height: 1; margin: 0; }
        .unit { font-size: 30px; font-family: sans-serif; font-weight: bold; }
        
        .info-row { width: 80%; display: flex; justify-content: space-between; font-family: sans-serif; color: #888; font-weight: bold; }
        .compass { color: #ff0000; font-size: 24px; }
        
        .btn-start { padding: 15px 40px; background: #ff6600; color: #000; border: none; border-radius: 50px; font-size: 20px; font-weight: bold; font-family: sans-serif; cursor: pointer; }
        .warning { color: #ff0000; animation: blink 0.5s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>
    <div class="case">
        <div class="info-row">
            <span>SATELLITE: <span id="sat" style="color:#00ff00;">SEARCHING...</span></span>
            <span class="compass" id="dir">北</span>
        </div>

        <div class="speed-box">
            <p class="speed-val" id="speed">00</p>
            <p class="unit">km/h</p>
        </div>

        <div id="status" style="font-family: sans-serif; font-size: 14px; color: #555;">小銀衛星定位系統 V1.0</div>
        
        <button id="startBtn" class="btn-start" onclick="startGps()">啟動衛星定位</button>
    </div>

    <script>
        let watchId = null;
        function startGps() {
            if (!navigator.geolocation) return alert("手機不支援 GPS");
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('sat').innerText = "LINKED";
            
            watchId = navigator.geolocation.watchPosition((pos) => {
                let s = pos.coords.speed; // 米/秒
                if (s === null || s < 0) s = 0;
                let kmh = Math.round(s * 3.6); // 轉為 km/h
                
                const speedEl = document.getElementById('speed');
                speedEl.innerText = kmh < 10 ? "0" + kmh : kmh;
                
                // 超速警示（設定為 60）
                if (kmh >= 60) speedEl.classList.add('warning');
                else speedEl.classList.remove('warning');

                // 方向判斷
                const heads = ["北", "東北", "東", "東南", "南", "西南", "西", "西北"];
                if(pos.coords.heading !== null) {
                    let index = Math.round(pos.coords.heading / 45) % 8;
                    document.getElementById('dir').innerText = heads[index];
                }
            }, (err) => {
                alert("GPS 錯誤: " + err.message);
            }, { enableHighAccuracy: true });
        }
    </script>
</body>
</html>
