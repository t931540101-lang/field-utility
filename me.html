<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K9 æˆ°æƒ…å®¤-å…¨åŠŸèƒ½æŒ‡æ®ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #e5e1d3; font-family: sans-serif; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: #d1d5db; }
        .day-cell { background-color: white; aspect-ratio: 1/1.3; padding: 4px; font-size: 11px; display: flex; flex-direction: column; cursor: pointer; transition: 0.2s; }
        .off-bg { background-color: #fff1f2; }
        .vacation-bg { background-color: #fef9c3; } 
        .off-text { color: #b91c1c; font-weight: bold; }
        .vacation-text { color: #854d0e; font-weight: bold; }
        .work-text { color: #065f46; font-weight: bold; }
        .other-month { background-color: #f3f4f6; pointer-events: none; opacity: 0.5; }
    </style>
</head>
<body class="max-w-md mx-auto shadow-lg min-h-screen flex flex-col">

    <div class="bg-black text-white p-3 flex items-center">
        <div class="w-1/3 flex flex-col" onclick="secretReset()">
            <span class="text-[10px] text-gray-400"> </span>
            <span class="font-bold text-xs">å§“åï¼š</span>
        </div>
        <div class="w-1/3 text-center">
            <span class="text-yellow-500 font-bold text-2xl" id="hr-count">48</span>
            <span class="text-yellow-500 text-[10px] ml-1">HR</span>
        </div>
        <div class="w-1/3 text-right">
            <span class="text-[10px] text-gray-400">å·¥è™Ÿï¼šD01762</span>
        </div>
    </div>

    <div class="bg-[#4a6741] text-white p-2 flex justify-between items-center shadow-md">
        <button onclick="changeMonth(-1)" class="text-xl px-4">â—€</button>
        <div class="text-center">
            <span id="month-label" class="font-bold text-lg">2026å¹´ 3æœˆ</span>
            <div id="vacation-count-only" class="text-[11px] bg-black/30 rounded-full px-4 py-0.5 mt-1 font-medium italic">
                æœ¬æœˆå·²ä¼‘ 0 å¤©
            </div>
        </div>
        <button onclick="changeMonth(1)" class="text-xl px-4">â–¶</button>
    </div>

    <div id="calendar" class="calendar-grid border-b border-gray-300"></div>

    <div class="p-2 bg-[#d6d2c4] grid grid-cols-3 gap-2 border-t border-gray-300">
        <select class="bg-white border border-gray-300 rounded p-2 text-xs text-gray-700">
            <option>ğŸ¢ å» å€</option>
            <option>ã„§ å» </option>
            <option>äºŒ å» </option>
            <option>ä¸‰ å» </option>
        </select>
        <select class="bg-white border border-gray-300 rounded p-2 text-xs text-gray-700">
            <option>ğŸ“ é …ç›®</option>
            <option>æ—¥Bç­</option>
            <option>å¤œBç­</option>
            <option>å¤œEç­</option>
            <option>ä¾‹å‡</option>
            <option>ä¼‘æ¯æ—¥</option>
            <option>ç¯€æ—¥</option>
            <option>ç‰¹ä¼‘</option>
            <option>äº‹å‡</option>
            <option>èª¿ä¼‘</option>
            <option>ç—…å‡</option>
        </select>
        <button onclick="alert('é€²å…¥æ“¦é™¤æ¨¡å¼')" class="bg-white border border-gray-300 rounded py-2 text-xs text-blue-600 font-bold active:bg-gray-200">
            æ“¦é™¤
        </button>
    </div>

    <div class="p-4 bg-[#ede9d9] flex-grow">
        <div class="bg-white/50 p-3 rounded-lg border border-gray-300 text-[10px] text-gray-600">
            <p class="font-bold mb-1 text-black">ğŸ›¡ï¸ æˆ°æƒ…å‚™è¨»ï¼š</p>
            <ul class="list-disc ml-4">
                <li>é»æ“Šæ—¥æœŸï¼šä¸Šç­ â” ä¼‘å‡ â” ç‰¹ä¼‘ (è‡ªå‹•æ‰£ 12HR)</li>
                <li><span class="text-blue-600">è£å‚™ï¼šHP 15s-du0xxx (240G æ“´å……å®Œæˆ)</span></li>
            </ul>
        </div>
    </div>

    <script>
        let totalHr = parseFloat(localStorage.getItem('k9_total_hr')) || 48;
        let schedule = JSON.parse(localStorage.getItem('k9_schedule')) || {};
        let viewDate = new Date(2026, 2, 1);
        let clickCount = 0;

        function updateUI() {
            document.getElementById('hr-count').innerText = totalHr;
            localStorage.setItem('k9_total_hr', totalHr);
            localStorage.setItem('k9_schedule', JSON.stringify(schedule));
            countVacationDays();
        }

        function toggleDay(key) {
            const current = schedule[key] || 'work';
            if (current === 'work') {
                schedule[key] = 'off';
            } else if (current === 'off') {
                schedule[key] = 'vacation';
                totalHr -= 12;
            } else {
                schedule[key] = 'work';
                totalHr += 12;
            }
            updateUI();
            render();
        }

        function countVacationDays() {
            const year = viewDate.getFullYear();
            const month = viewDate.getMonth() + 1;
            let count = 0;
            Object.keys(schedule).forEach(key => {
                if (key.startsWith(`${year}-${month}-`) && (schedule[key] === 'off' || schedule[key] === 'vacation')) {
                    count++;
                }
            });
            document.getElementById('vacation-count-only').innerText = `æœ¬æœˆå·²ä¼‘ ${count} å¤©`;
        }

        function secretReset() {
            clickCount++;
            if (clickCount >= 5) {
                let val = prompt("ğŸ”“ é€²å…¥ç³»çµ±è¨­å®šï¼šè«‹è¼¸å…¥æ–°çš„ç¸½ç‰¹ä¼‘æ™‚æ•¸(HR)", totalHr);
                if (val !== null) { totalHr = parseFloat(val); updateUI(); }
                clickCount = 0;
            }
        }

        function changeMonth(d) { viewDate.setMonth(viewDate.getMonth() + d); render(); countVacationDays(); }

        function render() {
            const cal = document.getElementById('calendar');
            const year = viewDate.getFullYear(), month = viewDate.getMonth();
            cal.innerHTML = '';
            document.getElementById('month-label').innerText = `${year}å¹´ ${month + 1}æœˆ`;
            const firstDay = new Date(year, month, 1).getDay();
            const days = new Date(year, month + 1, 0).getDate();
            for (let i = 0; i < firstDay; i++) cal.innerHTML += `<div class="day-cell other-month"></div>`;
            for (let i = 1; i <= days; i++) {
                const key = `${year}-${month+1}-${i}`;
                const type = schedule[key] || 'work';
                let cellClass = '', textClass = 'work-text', label = 'æ—¥Bç­';
                if(type === 'off') { cellClass = 'off-bg'; textClass = 'off-text'; label = 'ä¼‘å‡'; }
                if(type === 'vacation') { cellClass = 'vacation-bg'; textClass = 'vacation-text'; label = 'ç‰¹ä¼‘'; }
                cal.innerHTML += `<div class="day-cell ${cellClass}" onclick="toggleDay('${key}')"><div class="${textClass}">${i}</div><div class="text-[8px] text-gray-400 mt-auto">${label}</div></div>`;
            }
        }
        render(); updateUI();
    </script>
</body>
</html>
