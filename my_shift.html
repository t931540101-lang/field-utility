<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>班表回報 - 小黑哥</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 15px; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
        .date-btn { padding: 15px 5px; background: white; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; cursor: pointer; }
        .date-btn.active { background: #d32f2f; color: white; font-weight: bold; }
    </style>
</head>
<body>
    <h3>小黑哥 - 2月不行❌日期回報</h3>
    <div id="calendar" class="grid"></div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyB2_tKKsVT4kdW7PPkJgI9O7S1YdCWor48",
        authDomain: "factor-security-d1965.firebaseapp.com",
        databaseURL: "https://factor-security-d1965-default-rtdb.firebaseio.com",
        projectId: "factor-security-d1965",
        storageBucket: "factor-security-d1965.firebasestorage.app",
        messagingSenderId: "864846943143",
        appId: "1:864846943143:web:4cfa18cd20d2f712225c82"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const myName = "小黑哥"; // 每個警衛檔案改這個名字就好

    const container = document.getElementById('calendar');
    for (let d = 1; d <= 28; d++) {
        const btn = document.createElement('div');
        btn.className = 'date-btn';
        btn.id = `btn_${d}`;
        btn.innerText = d;
        btn.onclick = () => {
            const ref = db.ref('guardSchedules/' + myName + '_' + d);
            ref.once('value').then(s => ref.set(s.val() === '❌' ? '' : '❌'));
        };
        container.appendChild(btn);
    }

    db.ref('guardSchedules').on('value', (snapshot) => {
        const data = snapshot.val();
        for (let d = 1; d <= 28; d++) {
            const btn = document.getElementById(`btn_${d}`);
            if (data && data[myName + '_' + d] === '❌') btn.classList.add('active');
            else btn.classList.remove('active');
        }
    });
</script>
</body>
</html>
