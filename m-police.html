<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>M-Police V8.8</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #e3f2fd; margin: 0; padding: 0; }
        #auth-screen { background: #cfd8dc; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; position: fixed; width: 100%; z-index: 999; }
        .login-card { background: #fff; border: 2px solid #3273b5; padding: 20px; border-radius: 12px; width: 85%; max-width: 320px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        #main-app { display: none; }
        header { background: #000; color: red; text-align: center; padding: 5px; font-size: 12px; font-weight: bold; }
        .m-header { background: linear-gradient(to bottom, #74b9ff, #3273b5); color: #fff; padding: 15px; text-align: center; font-style: italic; font-weight: 900; font-size: 22px; }
        nav { display: flex; background: #546e7a; color: white; }
        .nav-item { flex: 1; padding: 12px; text-align: center; font-size: 13px; font-weight: bold; }
        .nav-item.active { background: rgba(0,0,0,0.3); border-bottom: 3px solid #00f2ff; }
        .container { padding: 15px; }
        .input-box { background: #fff; border: 2px solid #3273b5; border-radius: 8px; padding: 10px; margin-bottom: 10px; }
        .btn { width: 100%; padding: 15px; background: linear-gradient(to bottom, #42a5f5, #1976d2); color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 18px; box-shadow: 0 4px #0d47a1; margin-bottom: 10px; }
        .result-card { background: #fff; border: 2px solid #3273b5; border-radius: 12px; padding: 15px; display: none; }
        .item-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <div id="auth-screen">
        <header style="position:absolute; top:0; width:100%;">[è­¦æˆ’] éæˆæ¬Šç¦æ­¢é€²å…¥</header>
        <img src="IMG_1092.jpeg" style="width:110px; height:110px; border-radius:50%; border:3px solid #3273b5; background:#fff; margin-bottom:20px; padding:5px; object-fit: cover; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
        <div class="login-card">
            <h2 style="color:#1976d2; margin:0 0 15px 0;">ç³»çµ±æˆæ¬Šç™»å…¥</h2>
            <input type="text" id="gName" placeholder="äººå“¡å§“å" style="width:100%; padding:12px; margin-bottom:10px; box-sizing:border-box; border:1px solid #ccc; border-radius:4px;">
            <input type="password" id="aCode" placeholder="å®‰å…¨æˆæ¬Šç¢¼" style="width:100%; padding:12px; box-sizing:border-box; border:1px solid #ccc; border-radius:4px;">
            <button class="btn" style="margin-top:15px;" onclick="checkAuth()">é©— è­‰ ç™» å…¥</button>
        </div>
    </div>
    <div id="main-app">
        <header>[é€£ç·šæ­£å¸¸] é›²ç«¯åŒæ­¥ä¸­</header>
        <div class="m-header">M-Police æ•´åˆæŸ¥è©¢</div>
        <nav><div class="nav-item active">ä¸€èˆ¬</div><div class="nav-item">é€²éš</div><div class="nav-item">æ‡‰ç”¨</div><div class="nav-item">é »é“</div></nav>
        <div class="container">
            <div class="input-box"><input type="text" id="qInput" placeholder="è»Šç‰Œ / å·¥è™Ÿ / å§“å" style="width:100%; border:none; font-size:18px; outline:none;"></div>
            <button class="btn" onclick="search()">æŸ¥ è©¢</button>
            <div id="resCard" class="result-card">
                <div id="resTitle" style="text-align:center; font-weight:bold; color:#1976d2; margin-bottom:10px;">èº«ä»½ç¢ºèª</div>
                <div class="item-row"><span>å§“åï¼š</span><span id="rName"></span></div>
                <div class="item-row"><span>å–®ä½ï¼š</span><span id="rUnit"></span></div>
                <div class="item-row"><span>è»Šç‰Œï¼š</span><span id="rPlate"></span></div>
            </div>
        </div>
    </div>
<script>
    const firebaseConfig = { apiKey: "AIzaSyB2_tKKsVT4kdW7PPkJgI9O7S1YdCWor48", databaseURL: "https://factor-security-d1965-default-rtdb.firebaseio.com", projectId: "factor-security-d1965", appId: "1:864846943143:web:4cfa18cd20d2f712225c82" };
    firebase.initializeApp(firebaseConfig); const db = firebase.database();
    function checkAuth() {
        const n = document.getElementById('gName').value; const c = document.getElementById('aCode').value;
        if(n && c === "8888") { localStorage.setItem('guard', n); document.getElementById('auth-screen').style.display='none'; document.getElementById('main-app').style.display='block'; }
        else alert("æˆæ¬Šç¢¼éŒ¯èª¤");
    }
    function search() {
        const q = document.getElementById('qInput').value.trim().toUpperCase(); if(!q) return;
        const find = (path, title) => { db.ref(path).once('value', snap => {
            snap.forEach(c => { const d = c.val(); if(d.name===q||d.id===q||d.plate===q) {
                document.getElementById('resCard').style.display='block';
                document.getElementById('resTitle').innerText = title;
                document.getElementById('rName').innerText = d.name;
                document.getElementById('rUnit').innerText = d.reason || '---';
                document.getElementById('rPlate').innerText = d.plate || '---';
            }});
        }); };
        find('employee_list', 'âœ… å“¡å·¥ç¢ºèª'); find('vip_list', 'ğŸŒŸ VIP è‘£äº‹'); find('blacklist_data', 'âš ï¸ é»‘åå–®è­¦å‘Š');
    }
</script>
</body>
</html>
