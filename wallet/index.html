<style>
    /* æ–°å¢åˆªé™¤æŒ‰éˆ•çš„æ¨£å¼ */
    .preview-container { position: relative; width: 100%; margin-top: 10px; display: none; }
    #preview { width: 100%; border-radius: 8px; border: 2px solid #ddd; }
    .del-btn { 
        position: absolute; top: 10px; right: 10px; 
        background: rgba(231, 76, 60, 0.9); color: white; 
        border: none; border-radius: 50%; width: 35px; height: 35px; 
        font-size: 20px; font-weight: bold; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
</style>

<div class="card">
    <h2>ğŸ§¾ 2. ç™¼ç¥¨/å°å¸³ (æ‹ç…§/è¨˜å¸³)</h2>
    <div class="btn-row">
        <button class="cam-btn" onclick="document.getElementById('camFile').click()">ğŸ“¸ æ‹ç…§</button>
        <button onclick="addExpense()">ğŸ’° ç¢ºèªæ‰£æ¬¾</button>
    </div>

    <div class="preview-container" id="pContainer">
        <img id="preview" alt="ç™¼ç¥¨é è¦½">
        <button class="del-btn" onclick="deletePhoto()">Ã—</button>
    </div>
</div>

<script>
    // æ–°å¢åˆªé™¤ç…§ç‰‡çš„é‚è¼¯
    function showPreview(input) {
        const container = document.getElementById('pContainer');
        const preview = document.getElementById('preview');
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = (e) => {
                preview.src = e.target.result;
                container.style.display = 'block';
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function deletePhoto() {
        if(confirm("ç¢ºå®šè¦åˆªé™¤é€™å¼µç…§ç‰‡é‡æ–°æ‹å—ï¼Ÿ")) {
            document.getElementById('pContainer').style.display = 'none';
            document.getElementById('preview').src = '';
            document.getElementById('camFile').value = ''; // æ¸…ç©ºæª”æ¡ˆé¸æ“‡å™¨
        }
    }

    // åœ¨ addExpense æˆåŠŸå¾Œä¹Ÿè¦éš±è—å®¹å™¨
    function addExpense() {
        let price = parseInt(document.getElementById('itemPrice').value) || 0;
        if(price > 0) {
            currentExpenses += price;
            document.getElementById('itemPrice').value = '';
            document.getElementById('itemName').value = '';
            document.getElementById('pContainer').style.display = 'none'; // éš±è—å®¹å™¨
            document.getElementById('camFile').value = '';
            calculateBalance();
            alert('æ‰£æ¬¾æˆåŠŸï¼');
        }
    }
</script>
