<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K9 è­¦è¡›ç¸½ç­è¡¨</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --day-bg: #fff; --night-bg: #34495e; --header: #2c3e50; }
        body { font-family: sans-serif; background: #f0f2f5; margin: 0; padding: 10px; }
        .container { width: 100%; max-width: 800px; margin: auto; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        h2 { background: var(--header); color: white; margin: 0; padding: 15px; text-align: center; font-size: 1.2rem; }
        
        table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        th, td { border: 1px solid #ddd; text-align: center; padding: 10px 5px; font-size: 14px; }
        th { background: #ecf0f1; color: #7f8c8d; }
        
        /* ç­æ¬¡æ¨£å¼ */
        .shift-input { width: 90%; border: none; text-align: center; font-size: 14px; background: transparent; color: #333; }
        .shift-input:focus { background: #fffde7; outline: none; }
        
        .day-label { color: #f39c12; font-weight: bold; font-size: 12px; }
        .night-label { color: #3498db; font-weight: bold; font-size: 12px; }
        
        .admin-panel { padding: 10px; background: #fffbe6; border-bottom: 1px solid #ffe58f; text-align: center; font-size: 12px; color: #856404; }
    </style>
</head>
<body>

<div class="container">
    <h2>2026å¹´ 2æœˆ ç¸½ç­è¡¨</h2>
    <div class="admin-panel" id="adminNotice">ğŸ”’ å”¯è®€æ¨¡å¼ (é»æ“Šäººäº‹è§£é–å¯ç·¨è¼¯)</div>
    
    <table id="scheduleTable">
        <thead>
            <tr>
                <th>æ—¥æœŸ</th>
                <th>æ—¥ç­ (07-19)</th>
                <th>å¤œç­ (19-07)</th>
            </tr>
        </thead>
        <tbody id="scheduleBody">
            </tbody>
    </table>
</div>

<script>
    // å»¶ç”¨å°é»‘å“¥ Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyB2_tKKsVT4kdW7PPkJgI9O7S1YdCWor48",
        authDomain: "factor-security-d1965.firebaseapp.com",
        databaseURL: "https://factor-security-d1965-default-rtdb.firebaseio.com",
        projectId: "factor-security-d1965",
        storageBucket: "factor-security-d1965.firebasestorage.app",
        messagingSenderId: "864846943143",
        appId: "1:864846943143:web:4cfa18cd20d2f712225c82"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ç”¢ç”Ÿ 7 å¤©è¡¨æ ¼
    const tbody = document.getElementById('scheduleBody');
    for (let i = 16; i <= 22; i++) { // æ¸¬è©¦ 2/16 - 2/22
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>2/${i}</td>
            <td><input class="shift-input" id="d_${i}" onchange="updateShift('2_${i}_day', this.value)" placeholder="æœªæ’ç­"></td>
            <td><input class="shift-input" id="n_${i}" onchange="updateShift('2_${i}_night', this.value)" placeholder="æœªæ’ç­"></td>
        `;
        tbody.appendChild(tr);
    }

    // æ›´æ–°é›²ç«¯è³‡æ–™
    function updateShift(id, value) {
        db.ref('roster/' + id).set(value);
    }

    // å¯¦æ™‚ç›£è½é›²ç«¯è®Šå‹•
    db.ref('roster').on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            for (let i = 16; i <= 22; i++) {
                if (data[`2_${i}_day`]) document.getElementById(`d_${i}`).value = data[`2_${i}_day`];
                if (data[`2_${i}_night`]) document.getElementById(`n_${i}`).value = data[`2_${i}_night`];
            }
        }
    });
</script>

</body>
</html>
