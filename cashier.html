<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è­¦è¡›å®¤æ”¶éŠ€ç³»çµ±</title>
    <style>
        :root {
            --bg-color: #0a1a12;    /* æ›´æ·±é‚ƒçš„è·äººå¢¨ç¶  */
            --text-color: #e0e0e0; 
            --accent-color: #00ff41; /* è¢å…‰ç¶ æ–‡å­— */
            --btn-color: #2d5a27;   /* æ·±æ£®æ—ç¶ æŒ‰éˆ• */
        }
        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0; padding: 15px;
            display: flex; flex-direction: column;
            height: 100vh; box-sizing: border-box;
        }
        .header { text-align: center; border-bottom: 1px solid var(--accent-color); margin-bottom: 15px; padding-bottom: 5px; }
        
        /* è¼¸å…¥å€åŸŸ */
        .input-box { background: #122b1e; padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #2d5a27; }
        input { 
            width: 100%; background: none; border: none; border-bottom: 1px solid var(--accent-color); 
            color: var(--accent-color); font-size: 18px; padding: 5px 0; margin-bottom: 10px; outline: none;
        }
        
        .display-area { text-align: right; margin: 10px 0; }
        .amount { font-size: 48px; font-weight: bold; color: var(--accent-color); text-shadow: 0 0 10px rgba(0,255,65,0.3); }
        
        /* å·¦æ‰‹å¤§æŒ‰éˆ• */
        .keypad { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        button { 
            background: var(--btn-color); color: white; border: none; border-radius: 12px; 
            padding: 20px; font-size: 20px; font-weight: bold; cursor: pointer;
        }
        button:active { filter: brightness(1.5); }
        .btn-add { background: #3d8c40; font-size: 24px; }
        .btn-save { background: #b33939; grid-column: span 2; }
        
        /* æ­·å²æ¸…å–® */
        .history { flex-grow: 1; overflow-y: auto; background: rgba(0,0,0,0.3); border-radius: 10px; padding: 10px; }
        .history-item { 
            display: flex; justify-content: space-between; border-bottom: 1px solid #222; 
            padding: 8px 0; font-size: 14px; 
        }
    </style>
</head>
<body>

<div class="header">
    <h3 style="color:var(--accent-color); margin:0;">ğŸ›¡ï¸ è­¦è¡›å®¤æ”¶éŠ€ç³»çµ± v2.0</h3>
</div>

<div class="input-box">
    <div style="font-size:12px; color:#888; margin-bottom:5px;">ğŸ“… æ—¥æœŸèˆ‡å» å•†ç™»è¨˜ï¼š</div>
    <input type="date" id="recDate">
    <input type="text" id="vendorName" placeholder="è«‹è¼¸å…¥å» å•†åç¨± (ä¾‹å¦‚: é˜¿åœŸä¼¯)" onclick="this.select()">
</div>

<div class="display-area">
    <div style="font-size:14px; color:#aaa;">æ‡‰æ”¶ç¸½é¡ ($65/é¤)</div>
    <div id="mainDisplay" class="amount">$0</div>
</div>

<div class="keypad">
    <button class="btn-add" onclick="addMeal()">â• å¢åŠ ä¸€é¤</button>
    <button onclick="clearCurrent()">ğŸ”„ æ¸…é™¤é‡ç®—</button>
    <button onclick="calculateChange()">ğŸ’¸ æ‰¾é›¶è¨ˆç®—</button>
    <button onclick="clearHistory()" style="background:#444; font-size:14px;">ğŸ—‘ï¸ æ¸…ç©ºæ¸…å–®</button>
    <button class="btn-save" onclick="saveToCloud()">ğŸ’¾ å­˜å…¥æœˆçµå ±è¡¨</button>
</div>

<div class="history">
    <div style="color:var(--accent-color); font-weight:bold; font-size:14px; margin-bottom:8px;">æœ¬æœˆçµå¸³æ¸…å–®ï¼š</div>
    <div id="logList"></div>
</div>

<script>
    const MEAL_PRICE = 65;
    let currentTotal = 0;
    let records = JSON.parse(localStorage.getItem('guardCashier') || "[]");

    // åˆå§‹åŒ–æ—¥æœŸ
    window.onload = function() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('recDate').value = today;
        renderLogs();
    };

    function addMeal() {
        currentTotal += MEAL_PRICE;
        document.getElementById('mainDisplay').innerText = '$' + currentTotal;
    }

    function clearCurrent() {
        currentTotal = 0;
        document.getElementById('mainDisplay').innerText = '$0';
    }

    function calculateChange() {
        let pay = prompt("æ”¶åˆ°å¤šå°‘éŒ¢ï¼Ÿ");
        if(pay) {
            alert("æ‡‰æ‰¾é›¶ï¼š$" + (pay - currentTotal));
        }
    }

    function saveToCloud() {
        const vendor = document.getElementById('vendorName').value || "æœªå‘½åå» å•†";
        const date = document.getElementById('recDate').value;
        if(currentTotal === 0) { alert("è«‹å…ˆå¢åŠ é¤æ•¸ï¼"); return; }

        records.unshift({ date, vendor, total: currentTotal });
        localStorage.setItem('guardCashier', JSON.stringify(records));
        
        alert(vendor + " ç´€éŒ„å­˜æª”æˆåŠŸï¼");
        clearCurrent();
        document.getElementById('vendorName').value = "";
        renderLogs();
    }

    function renderLogs() {
        const list = document.getElementById('logList');
        list.innerHTML = records.map(r => `
            <div class="history-item">
                <span>${r.date.substring(5)} | <b>${r.vendor}</b></span>
                <span style="color:var(--accent-color)">$${r.total}</span>
            </div>
        `).join('');
    }

    function clearHistory() {
        if(confirm("ç¢ºå®šè¦æ¸…ç©ºæœ¬æœˆæ‰€æœ‰ç´€éŒ„å—ï¼Ÿ")) {
            records = [];
            localStorage.removeItem('guardCashier');
            renderLogs();
        }
    }
</script>

</body>
</html>
