<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K9 特休班表管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #e5e1d3; } /* 復刻妳截圖的米色背景 */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: #d1d5db; }
        .day-cell { background-color: white; min-height: 80px; padding: 4px; font-size: 12px; }
        .off-day { color: #b91c1c; } /* 休假紅色 */
        .work-day { color: #065f46; font-weight: bold; } /* 日班綠色 */
        .vacation-tag { background-color: #fde68a; color: #92400e; font-size: 10px; padding: 2px; border-radius: 2px; text-align: center; }
    </style>
</head>
<body class="max-w-md mx-auto shadow-lg min-h-screen flex flex-col">

    <div class="bg-black text-white p-3 flex justify-between items-center">
        <span class="font-bold">姓名：小黑</span>
        <span class="text-yellow-500 font-bold">剩餘：<span id="hr-count">48</span> HR</span>
    </div>

    <div class="bg-[#4a6741] text-white p-2 flex justify-between items-center text-sm">
        <button>◀</button>
        <span class="font-bold">2026年 3月</span>
        <button>▶</button>
    </div>

    <div class="grid grid-cols-7 bg-[#ede9d9] text-[#9a8c73] text-[10px] text-center py-1 border-b border-gray-300">
        <div>日</div><div>一</div><div>二</div><div>三</div><div>四</div><div>五</div><div>六</div>
    </div>

    <div class="calendar-grid border-b border-gray-300" id="calendar">
        </div>

    <div class="p-4 bg-[#ede9d9]">
        <p class="text-[10px] text-gray-500 mb-2 font-bold">快速扣除特休時數：</p>
        <div class="grid grid-cols-3 gap-2">
            <button onclick="deduct(1)" class="bg-white border border-gray-300 py-2 rounded shadow-sm text-xs active:bg-gray-100">-1 HR</button>
            <button onclick="deduct(4)" class="bg-white border border-gray-300 py-2 rounded shadow-sm text-xs active:bg-gray-100">-4 HR</button>
            <button onclick="deduct(8)" class="bg-white border border-gray-300 py-2 rounded shadow-sm text-xs active:bg-gray-100">-8 HR</button>
        </div>
        <button onclick="resetHr()" class="w-full mt-3 text-[10px] text-gray-400 underline">手動重設總時數</button>
    </div>

    <script>
        let totalHours = parseFloat(localStorage.getItem('k9_total_hr')) || 48;

        function updateHR() {
            document.getElementById('hr-count').innerText = totalHours;
            localStorage.setItem('k9_total_hr', totalHours);
        }

        function deduct(amt) {
            if(totalHours >= amt) {
                totalHours -= amt;
                updateHR();
            } else {
                alert("班長，時數不夠囉！");
            }
        }

        function resetHr() {
            let n = prompt("輸入新的總時數：", totalHours);
            if(n) { totalHours = parseFloat(n); updateHR(); }
        }

        // 生成 3 月日曆模擬 (簡化版)
        const cal = document.getElementById('calendar');
        for(let i=1; i<=31; i++) {
            let type = (i % 7 === 1 || i % 7 === 4) ? '休假' : '日B班';
            let colorClass = type === '休假' ? 'off-day' : 'work-day';
            cal.innerHTML += `
                <div class="day-cell">
                    <div class="${colorClass}">${i}</div>
                    <div class="text-[9px] text-gray-400">${type}</div>
                    ${(i === 18 || i === 25) ? '<div class="vacation-tag">特休</div>' : ''}
                </div>`;
        }
        updateHR();
    </script>
</body>
</html>
