<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>K9 ç¸é†«è­·ç†ç«™ | 2026 é›²ç«¯å°ˆæ¥­ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; color: #1e293b; padding: 15px; }
        .medical-container { max-width: 600px; margin: 0 auto; }
        .medical-card { background: white; border: 2px solid #1e293b; box-shadow: 5px 5px 0px #cbd5e1; border-radius: 4px; padding: 15px; margin-bottom: 25px; position: relative; }
        .stamp { border: 2.5px solid #ef4444; color: #ef4444; transform: rotate(-12deg); font-weight: 900; padding: 2px 8px; border-radius: 4px; display: inline-block; font-size: 14px; position: absolute; right: 20px; top: 15px; }
        .grid-table { display: grid; grid-template-columns: repeat(4, 1fr); border: 2px solid #1e293b; font-size: 13px; text-align: center; }
        .grid-header { background: #1e293b; color: white; padding: 6px; font-weight: 900; border: 0.5px solid #334155; }
        .grid-cell { background: white; padding: 6px; font-weight: 700; border: 1px solid #1e293b; display: flex; align-items: center; justify-content: center; }
        .log-section { border: 2px solid #1e293b; border-top: none; margin-top: -2px; }
        .log-header { background: #f1f5f9; border-bottom: 2px solid #1e293b; display: flex; font-weight: 900; font-size: 12px; }
        .log-row { display: flex; border-bottom: 1px solid #cbd5e1; font-size: 13px; min-height: 50px; }
        .add-btn { background: #1e293b; color: white; width: 100%; padding: 14px; font-weight: 900; font-size: 14px; border-radius: 4px; margin-top: 15px; transition: all 0.2s; }
        .add-btn:active { background: #059669; transform: scale(0.98); }
    </style>
</head>
<body>

<div class="medical-container">
    <header class="mb-6 relative">
        <h1 class="text-2xl font-black text-slate-800 tracking-tighter mb-1">å°ç£ç²¾éŠ³çŠ¬éš»<br>è‡¨åºŠç—…æ­·ç³»çµ±</h1>
        <p class="text-sm font-bold text-slate-600">ğŸ‘©â€âš•ï¸ è­·ç†å¸«ï¼šå°é»‘å“¥</p>
        <div class="stamp italic">å·²èªè­‰</div>
    </header>

    <div class="medical-card">
        <div class="grid-table">
            <div class="grid-header">å§“å</div>
            <div class="grid-cell text-blue-600 font-black">å¼µå¸ƒä¸</div>
            <div class="grid-header">é«”é‡</div>
            <div class="grid-cell">43.5 KG</div>
            <div class="grid-header">æ€§åˆ¥</div>
            <div class="grid-cell">M / 3Y+</div>
            <div class="grid-header">å“ç¨®</div>
            <div class="grid-cell">é«˜å±±çŠ¬</div>
        </div>
        
        <div class="log-section">
            <div class="log-header">
                <div class="w-[30%] p-2 text-center border-r-2 border-slate-800 uppercase tracking-tighter">è¨ºç™‚æ™‚é–“</div>
                <div class="w-[70%] p-2">è‡¨åºŠç´€éŒ„ (åŒæ­¥é›²ç«¯)</div>
            </div>
            <div id="logs_Pudding">
                </div>
        </div>

        <button onclick="saveRecord('å¼µå¸ƒä¸', '43.5')" class="add-btn">
            + æ–°å¢è‡¨åºŠç´€éŒ„ (SAVE TO CLOUD)
        </button>
    </div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxm4CDB5i8V2CX6lbCu4gxI2TH-jGKFznI8H01CLlnKEh9Fdr71pfeQr7ai6VcVtAvomw/exec";
    
    // åˆå§‹åŒ–ç´€éŒ„
    let medicalLogs = JSON.parse(localStorage.getItem('K9_LOGS_PRO_V1') || '[]');
    refreshDisplay();

    async function saveRecord(name, weight) {
        const note = prompt(`[${name}] è­·ç†å¸«å°é»‘å“¥ï¼Œè«‹è¼¸å…¥ä»Šæ—¥è¨ºæ–·ç´€éŒ„ï¼š`);
        if (!note) return;

        const now = new Date();
        const timeStr = `${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${(now.getMinutes()<10?'0':'')+now.getMinutes()}`;

        // 1. æœ¬åœ°ç«‹å³å­˜æª”
        medicalLogs.unshift({ time: timeStr, note: note });
        localStorage.setItem('K9_LOGS_PRO_V1', JSON.stringify(medicalLogs));
        refreshDisplay();

        // 2. ç§˜å¯†å™´å°„é›²ç«¯
        try {
            const query = `type=k9&dogName=${encodeURIComponent(name)}&area=${encodeURIComponent(weight + " KG")}&health=é†«ç™‚ç´€éŒ„&note=${encodeURIComponent(note)}`;
            fetch(`${SCRIPT_URL}?${query}`, { mode: 'no-cors' });
            alert("ğŸš€ æ•¸æ“šå·²åŒæ­¥è‡³ç­é•·é›²ç«¯å¾Œå°ï¼");
        } catch (e) {
            console.log("Sync failed");
        }
    }

    function refreshDisplay() {
        const container = document.getElementById('logs_Pudding');
        if (medicalLogs.length === 0) {
            container.innerHTML = '<div class="p-8 text-center text-slate-300 italic text-sm">å°šç„¡ç´€éŒ„</div>';
            return;
        }
        container.innerHTML = medicalLogs.map(l => `
            <div class="log-row">
                <div class="w-[30%] p-2 border-r-2 border-slate-800 text-[10px] text-slate-500 flex items-center justify-center font-mono text-center leading-tight">${l.time}</div>
                <div class="w-[70%] p-2 italic flex items-center font-medium text-slate-700">${l.note}</div>
            </div>
        `).join('');
    }
</script>

</body>
</html>
